{% extends 'base.html' %}
{% load static %}

{% block content %}
<h2>Update Your Account</h2>
<form method="post" action="{% url 'account_update' %}">
  {% csrf_token %}
  {{ user_form.as_p }}
  <button type="submit" class="btn btn-primary">Update Profile</button>
</form>

<hr>

<h3>Change Password</h3>
<button class="btn btn-secondary" id="toggle-password-change">Change Password</button>

<div id="password-change-section" style="display:none;">
  <form method="post" action="{% url 'account_password_change' %}">
    {% csrf_token %}
    {{ password_form.as_p }}
    <button type="submit" class="btn btn-primary">Update Password</button>
  </form>
</div>

<hr>

<h3>Delete Account</h3>
<button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete Account</button>

<!-- Delete confirmation modal -->
<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteModalLabel">Delete Account</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form method="post" action="{% url 'account_delete' %}">
                    {% csrf_token %}
                    <p>Are you sure you want to delete your account? This action cannot be undone.</p>
                    <label for="password">Enter your password:</label>
                    <input type="password" id="password" name="password">
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="submit" class="btn btn-danger">Delete Account</button>
                </form>
            </div>
        </div>
    </div>
</div>



{% endblock %}

{% block extras %}
<script src="{% static 'js/account_admin.js' %}"></script>
{% endblock %}
